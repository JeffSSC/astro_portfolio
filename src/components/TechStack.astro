---
import { Icon } from "astro-icon/components";

interface TechItem {
    icon: string;
    name: string;
}

interface Props {
    techs?: (string | TechItem)[];
}

const {
    techs = [
        "astro",
        { icon: "vuejs", name: "Vue.js" },
        "python",
        "html5",
        "css3",
        "git",
        "github",
        { icon: "amazonwebservices", name: "AWS" },
        "docker",
        "nodejs",
        "tailwindcss",
        "postgresql",
        "mysql",
    ],
} = Astro.props;

const iconMap: Record<string, string> = {
    astro: "simple-icons:astro",
    vuejs: "simple-icons:vuedotjs",
    python: "simple-icons:python",
    html5: "simple-icons:html5",
    css3: "simple-icons:css3",
    git: "simple-icons:git",
    github: "simple-icons:github",
    amazonwebservices: "simple-icons:amazonaws",
    docker: "simple-icons:docker",
    nodejs: "simple-icons:nodedotjs",
    tailwindcss: "simple-icons:tailwindcss",
    postgresql: "simple-icons:postgresql",
    mysql: "simple-icons:mysql",
};

function getIcon(item: string | TechItem) {
    const key = typeof item === "string" ? item : item.icon;
    return iconMap[key] || `simple-icons:${key}`;
}

function getName(item: string | TechItem) {
    if (typeof item !== "string") return item.name;
    return item.charAt(0).toUpperCase() + item.slice(1);
}
---

<section class="wrapper">
    <div class="grid-container">
        {
            techs.map((tech) => (
                <div class="tech-item">
                    <div class="icon-wrapper">
                        <Icon name={getIcon(tech)} />
                    </div>
                    <span class="tech-name">{getName(tech)}</span>
                </div>
            ))
        }
    </div>
</section>

<style>
    .wrapper {
        --color-text: navy;
        --color-bg: papayawhip;
        --color-bg-accent: #ecdcc0;
        --size: clamp(4rem, 6rem, 8rem);
        --gap: calc(var(--size) / 12);
    }

    @media (prefers-color-scheme: dark) {
        .wrapper {
            --color-text: papayawhip;
            --color-bg: rgb(14, 14, 14);
            --color-bg-accent: #151515;
        }
    }

    .wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        padding: 1.5rem 0;
    }

    .grid-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: calc(var(--gap) * 2);
        max-width: 1200px;
    }

    .tech-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        transition: transform 0.2s ease;
    }

    .icon-wrapper {
        display: grid;
        place-items: center;
        width: var(--size);
        height: var(--size);
        color: var(--color-text);
        background: var(--color-bg-accent);
        aspect-ratio: 1/1;
        padding: calc(var(--size) / 10);
        border-radius: 0.75rem;
        transition: background-color 0.2s ease;
    }

    .icon-wrapper svg {
        width: 100%;
        height: 100%;
        transition: filter 0.2s ease;
    }

    .tech-name {
        font-size: 0.875rem;
        font-weight: 500;
        color: white;
        opacity: 0.8;
        text-align: center;
    }

    .tech-item:hover {
        transform: translateY(-5px);
        cursor: pointer;
    }

    .tech-item:hover .icon-wrapper svg {
        filter: brightness(1.1);
    }
</style>
